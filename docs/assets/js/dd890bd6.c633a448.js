"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8662],{1299:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>a,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>h});var t=n(4848),r=n(8453);const i={sidebar_position:1},a="Quick Start with Whisper",l={id:"user-guide/speech-to-text/quick-start-whisper",title:"Quick Start with Whisper",description:"Whisper is OpenAI's general-purpose speech recognition model that accurately converts speech to text. This guide shows you how to set up and run Whisper using the LlamaEdge whisper API server server, which provides an OpenAI-compatible API interface.",source:"@site/docs/user-guide/speech-to-text/quick-start-whisper.md",sourceDirName:"user-guide/speech-to-text",slug:"/user-guide/speech-to-text/quick-start-whisper",permalink:"/docs/user-guide/speech-to-text/quick-start-whisper",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/user-guide/speech-to-text/quick-start-whisper.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Speech to Text",permalink:"/docs/category/speech-to-text"},next:{title:"The API server CLI options",permalink:"/docs/user-guide/speech-to-text/cli"}},o={},h=[{value:"Install WasmEdge",id:"install-wasmedge",level:3},{value:"Download the portable API server app",id:"download-the-portable-api-server-app",level:3},{value:"Download the whisper model",id:"download-the-whisper-model",level:3},{value:"Run the Whisper model",id:"run-the-whisper-model",level:3},{value:"Use the API",id:"use-the-api",level:3},{value:"Translate Audio (Speech-to-Text with Translation)",id:"translate-audio-speech-to-text-with-translation",level:4}];function d(e){const s={a:"a",code:"code",h1:"h1",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"quick-start-with-whisper",children:"Quick Start with Whisper"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.a,{href:"https://github.com/openai/whisper",children:"Whisper"})," is OpenAI's general-purpose speech recognition model that accurately converts speech to text. This guide shows you how to set up and run Whisper using the ",(0,t.jsx)(s.a,{href:"https://github.com/LlamaEdge/whisper-api-server",children:"LlamaEdge whisper API server"})," server, which provides an OpenAI-compatible API interface."]}),"\n",(0,t.jsx)(s.h3,{id:"install-wasmedge",children:"Install WasmEdge"}),"\n",(0,t.jsx)(s.p,{children:"First off, you'll need WasmEdge along with the necessary plugin for whisper, open your terminal and execute the following command:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"curl -sSf https://raw.githubusercontent.com/WasmEdge/WasmEdge/master/utils/install_v2.sh | bash -s\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Next, install the ",(0,t.jsx)(s.code,{children:"wasi-nn-whisper"})," plugin manually.  We're working to improve the installation experience. Stay tuned."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"For Mac Apple Silicon"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"# Download the whisper plugin for Mac Apple Silicon\ncurl -LO https://github.com/WasmEdge/WasmEdge/releases/download/0.14.1/WasmEdge-plugin-wasi_nn-whisper-0.14.1-darwin_arm64.tar.gz\n\n# Unzip the plugin to $HOME/.wasmedge/plugin\ntar -xzf WasmEdge-plugin-wasi_nn-whisper-0.14.1-darwin_arm64.tar.gz -C $HOME/.wasmedge/plugin\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"For CUDA 12.0 (Ubuntu)"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"# Download the stable diffusion plugin for cuda 12.0\ncurl -LO https://github.com/WasmEdge/WasmEdge/releases/download/0.14.1/WasmEdge-plugin-wasi_nn-whisper-cuda-12.0-0.14.1-ubuntu20.04_x86_64.tar.gz\n\n# Unzip the plugin to $HOME/.wasmedge/plugin\ntar -xzf WasmEdge-plugin-wasi_nn-whisper-cuda-12.0-0.14.1-ubuntu20.04_x86_64.tar.gz -C $HOME/.wasmedge/plugin\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"For CUDA 11.0 (Ubuntu)"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"# Download the stable diffusion plugin for cuda 11.0\ncurl -LO https://github.com/WasmEdge/WasmEdge/releases/download/0.14.1/WasmEdge-plugin-wasi_nn-whisper-cuda-11.3-0.14.1-ubuntu20.04_x86_64.tar.gz\n\n# Unzip the plugin to $HOME/.wasmedge/plugin\ntar -xzf WasmEdge-plugin-wasi_nn-whisper-cuda-11.3-0.14.1-ubuntu20.04_x86_64.tar.gz -C $HOME/.wasmedge/plugin\n"})}),"\n",(0,t.jsxs)(s.p,{children:["For release assets for other platform, please check out ",(0,t.jsx)(s.a,{href:"https://github.com/WasmEdge/WasmEdge/releases/tag/0.14.1",children:"the plugin release assets page"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"download-the-portable-api-server-app",children:"Download the portable API server app"}),"\n",(0,t.jsx)(s.p,{children:"Download the API server application. It's a Wasm file, which is lightweight (the size of the server is 3.7 MB) and cross-platform."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"curl -LO https://github.com/LlamaEdge/whisper-api-server/releases/download/0.3.9/whisper-api-server.wasm\n"})}),"\n",(0,t.jsx)(s.h3,{id:"download-the-whisper-model",children:"Download the whisper model"}),"\n",(0,t.jsxs)(s.p,{children:["You can browse and download the ggml model from ",(0,t.jsx)(s.a,{href:"https://huggingface.co/ggerganov/whisper.cpp/tree/main",children:"https://huggingface.co/ggerganov/whisper.cpp/tree/main"}),"."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"curl -LO https://huggingface.co/ggerganov/whisper.cpp/resolve/main/ggml-medium.bin\n"})}),"\n",(0,t.jsx)(s.h3,{id:"run-the-whisper-model",children:"Run the Whisper model"}),"\n",(0,t.jsx)(s.p,{children:"Start the whisper API server."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"wasmedge --dir .:. whisper-api-server.wasm -m ggml-medium.bin\n"})}),"\n",(0,t.jsx)(s.p,{children:"The server will start on port 8080 by default."}),"\n",(0,t.jsx)(s.h3,{id:"use-the-api",children:"Use the API"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Transcribe an audio file (Speech-to-Text)"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Download a test audio file:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"curl -LO https://github.com/LlamaEdge/whisper-api-server/raw/main/data/test.wav\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Send a transcription request:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"curl --location 'http://localhost:8080/v1/audio/transcriptions' \\\n  --header 'Content-Type: multipart/form-data' \\\n  --form 'file=@\"test.wav\"'\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["For non-English audio, specify the language as below. To check the language code, please refer to ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/List_of_ISO_639_language_codes",children:"List of ISO 639 language codes"}),"."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"curl --location 'http://localhost:8080/v1/audio/transcriptions' \\\n --header 'Content-Type: multipart/form-data' \\\n --form 'file=@\"test.wav\"' \\\n --form 'language=\"ja\"'\n"})}),"\n",(0,t.jsx)(s.p,{children:"Example response:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n    "text": "[00:00:00.000 --\x3e 00:00:03.540]  This is a test record for Whisper.cpp"\n}\n'})}),"\n",(0,t.jsx)(s.h4,{id:"translate-audio-speech-to-text-with-translation",children:"Translate Audio (Speech-to-Text with Translation)"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Download a test audio file:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"curl -LO https://github.com/LlamaEdge/whisper-api-server/raw/main/data/test_cn.wav\n"})}),"\n",(0,t.jsxs)(s.p,{children:["This audio contains a Chinese sentence, ",(0,t.jsx)(s.code,{children:"\u8fd9\u91cc\u662f\u4e2d\u6587\u5e7f\u64ad"}),", the English meaning is ",(0,t.jsx)(s.code,{children:"This is a Chinese broadcast"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Send a translation request:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"curl --location 'http://localhost:8080/v1/audio/translations' \\\n  --header 'Content-Type: multipart/form-data' \\\n  --form 'file=@\"test-cn.wav\"' \\\n  --form 'language=\"cn\"'\n"})}),"\n",(0,t.jsx)(s.p,{children:"Example response:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "text": "[00:00:00.000 --\x3e 00:00:04.000]  This is a Chinese broadcast."\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"That's all! Use whisper to process your audio now!"})]})}function c(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>l});var t=n(6540);const r={},i=t.createContext(r);function a(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);