"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3033],{7738:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>r});var n=s(4848),a=s(8453);const i={sidebar_position:1},o="Quick Start with Stable Diffusion models",l={id:"ai-models/text-to-image/quick-start-sd",title:"Quick Start with Stable Diffusion models",description:"Stable Diffusion is a state-of-the-art text-to-image generation model that creates high-quality images from text descriptions. With the LlamaEdge stable-diffusion-api-server, you can build an OpenAI-compatible API server for Stable Diffusion models.",source:"@site/docs/ai-models/text-to-image/quick-start-sd.md",sourceDirName:"ai-models/text-to-image",slug:"/ai-models/text-to-image/quick-start-sd",permalink:"/docs/ai-models/text-to-image/quick-start-sd",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/ai-models/text-to-image/quick-start-sd.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Text to Image",permalink:"/docs/category/text-to-image"},next:{title:"Run FLUX models with LlamaEdge",permalink:"/docs/ai-models/text-to-image/flux"}},d={},r=[{value:"Install WasmEdge",id:"install-wasmedge",level:3},{value:"Download the portable API server app",id:"download-the-portable-api-server-app",level:3},{value:"Download the Stable Diffusion model",id:"download-the-stable-diffusion-model",level:3},{value:"Start the API server",id:"start-the-api-server",level:3},{value:"Use the API",id:"use-the-api",level:3}];function c(e){const t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"quick-start-with-stable-diffusion-models",children:"Quick Start with Stable Diffusion models"}),"\n",(0,n.jsxs)(t.p,{children:["Stable Diffusion is a state-of-the-art text-to-image generation model that creates high-quality images from text descriptions. With the ",(0,n.jsx)(t.a,{href:"https://github.com/LlamaEdge/sd-api-server",children:"LlamaEdge stable-diffusion-api-server"}),", you can build an OpenAI-compatible API server for Stable Diffusion models."]}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsxs)(t.p,{children:["Want to use the recent Flux models? Check out ",(0,n.jsx)(t.a,{href:"https://www.secondstate.io/articles/flux1/",children:"Run FLUX.1 [schnell] on your MacBook"}),"."]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"install-wasmedge",children:"Install WasmEdge"}),"\n",(0,n.jsx)(t.p,{children:"Start by installing WasmEdge version 0.14.1."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"curl -sSf https://raw.githubusercontent.com/WasmEdge/WasmEdge/master/utils/install_v2.sh | bash -s -- -v 0.14.1\n"})}),"\n",(0,n.jsx)(t.p,{children:"Choose the appropriate installation command based on your system:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"For Mac Apple Silicon"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"# Download the stable diffusion plugin for Mac Apple Silicon\ncurl -LO https://github.com/WasmEdge/WasmEdge/releases/download/0.14.1/WasmEdge-plugin-wasmedge_stablediffusion-0.14.1-darwin_arm64.tar.gz\n\n# Unzip the plugin to $HOME/.wasmedge/plugin\ntar -xzf WasmEdge-plugin-wasmedge_stablediffusion-0.14.1-darwin_arm64.tar.gz -C $HOME/.wasmedge/plugin\n\nrm $HOME/.wasmedge/plugin/libwasmedgePluginWasiNN.dylib\n"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"For CUDA 12.0 (Ubuntu)."})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"# Download the stable diffusion plugin for cuda 12.0\ncurl -LO https://github.com/WasmEdge/WasmEdge/releases/download/0.14.1/WasmEdge-plugin-wasmedge_stablediffusion-cuda-12.0-0.14.1-ubuntu20.04_x86_64.tar.gz\n\n# Unzip the plugin to $HOME/.wasmedge/plugin\ntar -xzf WasmEdge-plugin-wasmedge_stablediffusion-cuda-12.0-0.14.1-ubuntu20.04_x86_64.tar.gz -C $HOME/.wasmedge/plugin\n"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"For CUDA 11.0 (Ubuntu)."})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"# Download the stable diffusion plugin for cuda 11.0\ncurl -LO https://github.com/WasmEdge/WasmEdge/releases/download/0.14.1/WasmEdge-plugin-wasmedge_stablediffusion-cuda-11.3-0.14.1-ubuntu20.04_x86_64.tar.gz\n\n# Unzip the plugin to $HOME/.wasmedge/plugin\ntar -xzf WasmEdge-plugin-wasmedge_stablediffusion-cuda-11.3-0.14.1-ubuntu20.04_x86_64.tar.gz -C $HOME/.wasmedge/plugin\n"})}),"\n",(0,n.jsx)(t.h3,{id:"download-the-portable-api-server-app",children:"Download the portable API server app"}),"\n",(0,n.jsx)(t.p,{children:"Download the API server application. It's a Wasm file, which is lightweight (the size of the server is 2.5 MB) and cross-platform."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"curl -LO https://github.com/LlamaEdge/sd-api-server/releases/latest/download/sd-api-server.wasm\n"})}),"\n",(0,n.jsx)(t.h3,{id:"download-the-stable-diffusion-model",children:"Download the Stable Diffusion model"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"curl -LO https://huggingface.co/second-state/stable-diffusion-2-1-GGUF/resolve/main/v2-1_768-nonema-pruned-f16.gguf\n"})}),"\n",(0,n.jsxs)(t.p,{children:["For more stable diffusion models, go to our ",(0,n.jsx)(t.a,{href:"https://huggingface.co/collections/second-state/stable-diffusion-models-677f9b3e01ac894463f4b326",children:"Stable Diffusion Models Collection"}),"."]}),"\n",(0,n.jsx)(t.h3,{id:"start-the-api-server",children:"Start the API server"}),"\n",(0,n.jsx)(t.p,{children:"Start the Stable Diffusion API server with the following command line."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"wasmedge --dir .:. sd-api-server.wasm --model-name sd-v2.1 --model v2-1_768-nonema-pruned-f16.gguf\n"})}),"\n",(0,n.jsx)(t.p,{children:"The server will start on port 8080 by default."}),"\n",(0,n.jsx)(t.h3,{id:"use-the-api",children:"Use the API"}),"\n",(0,n.jsx)(t.p,{children:"Then, we can use the API server to generate an image."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'curl -X POST \'http://localhost:8080/v1/images/generations\' \\\n  --header \'Content-Type: application/json\' \\\n  --data \'{\n      "model": "sd-v2.1",\n      "prompt": "A cute baby cat"\n  }\'\n'})}),"\n",(0,n.jsx)(t.p,{children:"Response example:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'{"created":1736419627,"data":[{"url":"http://localhost:8080/v1/files/download/file_6420f32d-0b9a-4554-8e0b-a8deac0ab023","prompt":"A cute baby cat"}]}\n'})}),"\n",(0,n.jsxs)(t.p,{children:["You can view the generated image by opening ",(0,n.jsx)(t.code,{children:"http://localhost:8080/v1/files/download/file_6420f32d-0b9a-4554-8e0b-a8deac0ab02"})," in your browser."]})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>l});var n=s(6540);const a={},i=n.createContext(a);function o(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);