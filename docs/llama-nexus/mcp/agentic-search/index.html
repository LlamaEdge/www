<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-llama-nexus/mcp/agentic-search" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Agentic Search | LlamaEdge</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://llamaedge.com/docs/llama-nexus/mcp/agentic-search"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Agentic Search | LlamaEdge"><meta data-rh="true" name="description" content="With its support for MCP servers, we can support &quot;agentic search&quot; from llama nexus. That is to support transparent knowledge base search via the /chat/completions API. There is no need for the llama nexus client to handle any tool call or MCP. It works like this:"><meta data-rh="true" property="og:description" content="With its support for MCP servers, we can support &quot;agentic search&quot; from llama nexus. That is to support transparent knowledge base search via the /chat/completions API. There is no need for the llama nexus client to handle any tool call or MCP. It works like this:"><link data-rh="true" rel="icon" href="/docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://llamaedge.com/docs/llama-nexus/mcp/agentic-search"><link data-rh="true" rel="alternate" href="https://llamaedge.com/docs/llama-nexus/mcp/agentic-search" hreflang="en"><link data-rh="true" rel="alternate" href="https://llamaedge.com/docs/llama-nexus/mcp/agentic-search" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.d85cdd19.css">
<script src="/docs/assets/js/runtime~main.c2577634.js" defer="defer"></script>
<script src="/docs/assets/js/main.c6255b2b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docs/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">LlamaEdge</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/LlamaEdge/LlamaEdge" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">LlamaEdge</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/llamaedge_vs_python">LlamaEdge vs Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/llamaedge_vs_llamacpp">LlamaEdge vs llama.cpp</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/llamaedge_vs_ollama">LlamaEdge vs Ollama</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/serve-ai-models">Serve AI models</a><button aria-label="Expand sidebar category &#x27;Serve AI models&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/agents-and-apps">Agents and apps</a><button aria-label="Collapse sidebar category &#x27;Agents and apps&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/llama-nexus/">What is Llama-Nexus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/llama-nexus/quick-start">Manage Your API Services with Llama-Nexus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/llama-nexus/register">Register API services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/llama-nexus/cli">CLI Options</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/working-with-mcp-servers">Working with MCP servers</a><button aria-label="Collapse sidebar category &#x27;Working with MCP servers&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/llama-nexus/mcp/quick-start-with-mcp">Quick start with MCP servers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/llama-nexus/mcp/agentic-search">Agentic Search</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/llama-nexus/mcp/add-mcp-server">Connect Another MCP Server</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/ecosystem-apps">Ecosystem apps</a><button aria-label="Expand sidebar category &#x27;Ecosystem apps&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/embed-ai-models">Embed AI models</a><button aria-label="Expand sidebar category &#x27;Embed AI models&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/agents-and-apps"><span itemprop="name">Agents and apps</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/working-with-mcp-servers"><span itemprop="name">Working with MCP servers</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Agentic Search</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Agentic Search</h1>
<p>With its support for MCP servers, we can support &quot;agentic search&quot; from llama nexus. That is to support transparent knowledge base search via the <code>/chat/completions</code> API. There is no need for the llama nexus client to handle any tool call or MCP. It works like this:</p>
<p>A <code>search()</code> tool is registered with llama nexus from an MCP server. When the user asks a question via the <code>/chat/completions</code> API, llama nexus knows to use the <code>search()</code> tool internally with its downstream LLM, and respond based on the search result. The user automagically gets a correct response to its <code>/chat/completions</code> request without needing to know anything about MCP tool calls or the knowledge base!</p>
<p>In this tutorial, you will learn how to set two databases from the same source materials. One is a Qdrant vector database to support semantic search, and the other is a TiDB relational database to support keyword search. We could improve the search accuracy by searching both databases. We will cover</p>
<ul>
<li>How to set up the databases</li>
<li>How to add data and index to the databases</li>
<li>How to set up the agentic search MCP server that provides the <code>search()</code> tool</li>
<li>How to add the agentic search MCP server to llama nexus</li>
<li>How to test the fina llama nexus set up</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prepare-databases">Prepare databases<a href="#prepare-databases" class="hash-link" aria-label="Direct link to Prepare databases" title="Direct link to Prepare databases">​</a></h2>
<p>We use Qdrant and TiDB to store the knowledge content in vector and full text formats respectively. They enable semantic and keywords searches of the knowledge base.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="qdrant-cloud">Qdrant cloud<a href="#qdrant-cloud" class="hash-link" aria-label="Direct link to Qdrant cloud" title="Direct link to Qdrant cloud">​</a></h3>
<p>Create a Qdrant cloud account here: <a href="https://cloud.qdrant.io/" target="_blank" rel="noopener noreferrer">https://cloud.qdrant.io/</a></p>
<p>Create a new cluster in any region.</p>
<p>Click open the cluster name, go to the API Keys tab to get an API key.</p>
<p><img decoding="async" loading="lazy" alt="Qdrant database" src="/docs/assets/images/agentic-search-qdrant-9a584d3332f1cf7210b23f49b20460ea.png" width="2526" height="1176" class="img_ev3q"></p>
<p>Open the Dashboard or Cluster UI for this cluster by clicking on the <code>...</code> button next to the cluster name. The base URL of the Dashboard is the base URL for connecting to the cluster.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">https://bb8ab5cf-eae2-4c7c-9493-5f7a183c89b8.us-east4-0.gcp.cloud.qdrant.io:6333</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="optional-create-your-own-collection-in-qdrant">Optional: create your own collection in Qdrant<a href="#optional-create-your-own-collection-in-qdrant" class="hash-link" aria-label="Direct link to Optional: create your own collection in Qdrant" title="Direct link to Optional: create your own collection in Qdrant">​</a></h4>
<blockquote>
<p>This is optional because the system will automatically create this vector collection if it does not exist. If the collection already exists, the system will write new data into the collection.</p>
</blockquote>
<p>In the Console tab to the left of the Dashboard page, type in the following API request to create a new vector collection named <code>myPoints</code>.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PUT collections/myPoints</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;vectors&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;size&quot;: 1536,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;distance&quot;: &quot;Cosine&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tidb-cloud">TiDB cloud<a href="#tidb-cloud" class="hash-link" aria-label="Direct link to TiDB cloud" title="Direct link to TiDB cloud">​</a></h3>
<p>Create an TiDB cloud account here: <a href="https://tidbcloud.com/" target="_blank" rel="noopener noreferrer">https://tidbcloud.com/</a></p>
<p>Create a new cluster in the Singapore (<code>ap-southeast-1</code>) region.</p>
<p>Click open the &quot;Overview&quot; tab, and click on the &quot;Connect&quot; button. Write down the following database connection string.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql://42eZLKLSueg7p8K.root:&lt;PASSWORD&gt;@gateway01.ap-southeast-1.prod.aws.tidbcloud.com:4000/test</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>&lt;PASSWORD&gt;</code> can be revealed once with the Reset Password link above the connection string display.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="optional-create-your-own-database-table-in-tidb">Optional: create your own database table in TiDB<a href="#optional-create-your-own-database-table-in-tidb" class="hash-link" aria-label="Direct link to Optional: create your own database table in TiDB" title="Direct link to Optional: create your own database table in TiDB">​</a></h4>
<blockquote>
<p>This is optional because the system will automatically create this table if it does not exist. If the table already exists, the system will write new data into the table.</p>
</blockquote>
<p>Click open the &quot;SQL Editor&quot; tab. Enter a SQL command and hit the &quot;Run&quot; button to create a new database.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE DATABASE myDB;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then, create a table in <code>myDB</code> based on our schema.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">USE myDB;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE myItems (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id INT NOT NULL AUTO_INCREMENT,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title TEXT NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    content TEXT NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FULLTEXT INDEX (content) WITH PARSER MULTILINGUAL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Click open the &quot;Overview&quot; tab, and click on the &quot;Connect&quot; button. Write down the following database connection string.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql://42eZLKLSueg7p8K.root:&lt;PASSWORD&gt;@gateway01.ap-southeast-1.prod.aws.tidbcloud.com:4000/myDB</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="set-up-knowledge-base">Set up knowledge base<a href="#set-up-knowledge-base" class="hash-link" aria-label="Direct link to Set up knowledge base" title="Direct link to Set up knowledge base">​</a></h2>
<p>Go to <a href="https://kb.cardea.cc/" target="_blank" rel="noopener noreferrer">https://kb.cardea.cc/</a> to login from your GitHUb account. Then, click on Settings to configure your knowledge processing pipeline.</p>
<p><img decoding="async" loading="lazy" alt="Configure the knowledge base" src="/docs/assets/images/agentic-search-kb-6134967e9c6bb5477cf3e50bc68582f0.png" width="2012" height="1822" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="qdrant">Qdrant<a href="#qdrant" class="hash-link" aria-label="Direct link to Qdrant" title="Direct link to Qdrant">​</a></h3>
<p>It stores the vectorized knowledge base for semantic search.</p>
<table><thead><tr><th>Name</th><th>Value</th></tr></thead><tbody><tr><td>Database URL</td><td>Your Qdrant cloud cluster&#x27;s dashboard URL: <code>https://bb8ab5cf-eae2-4c7c-9493-5f7a183c89b8.us-east4-0.gcp.cloud.qdrant.io:6333/</code></td></tr><tr><td>API Key</td><td>Get it from your Qdrant cloud cluster&#x27;s API Key tab</td></tr><tr><td>Collection Name</td><td><code>myPoints</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tidb">TiDB<a href="#tidb" class="hash-link" aria-label="Direct link to TiDB" title="Direct link to TiDB">​</a></h3>
<p>It stores the full text knowledge base for keywords search.</p>
<table><thead><tr><th>Name</th><th>Value</th></tr></thead><tbody><tr><td>Database URL</td><td>The TiDB database connection string from the TiDB dashboard.</td></tr><tr><td>Table Name</td><td><code>myItems</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="embedding-service">Embedding Service<a href="#embedding-service" class="hash-link" aria-label="Direct link to Embedding Service" title="Direct link to Embedding Service">​</a></h3>
<p>The API service that creates vector embeddings for the knowledge content.</p>
<table><thead><tr><th>Name</th><th>Value</th></tr></thead><tbody><tr><td>Base URL</td><td><code>https://0x448f0405310a9258cd5eab5f25f15679808c5db2.gaia.domains/v1</code></td></tr><tr><td>Model Name</td><td><code>gte-qwen2-7b</code></td></tr><tr><td>API Key</td><td><code>1234</code></td></tr><tr><td>Vector Size</td><td><code>1536</code></td></tr></tbody></table>
<blockquote>
<p>The Vector Size is determined by the embedding model we use.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="llm-service">LLM Service<a href="#llm-service" class="hash-link" aria-label="Direct link to LLM Service" title="Direct link to LLM Service">​</a></h3>
<p>The API service that generates summaries and QAs for search indexes for the knowledge content.</p>
<table><thead><tr><th>Name</th><th>Value</th></tr></thead><tbody><tr><td>Base URL</td><td><code>https://0x9fcf7888963793472bfcb8c14f4b6b47a7462f17.gaia.domains/v1</code></td></tr><tr><td>Model Name</td><td><code>gemma3-27b</code></td></tr><tr><td>API Key</td><td><code>1234</code></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-knowledge">Add knowledge<a href="#add-knowledge" class="hash-link" aria-label="Direct link to Add knowledge" title="Direct link to Add knowledge">​</a></h2>
<p>After Save Configuration, you can now enter and upload knowledge content from the web site.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-a-set-of-qa-pairs">Add a set of QA pairs<a href="#add-a-set-of-qa-pairs" class="hash-link" aria-label="Direct link to Add a set of QA pairs" title="Direct link to Add a set of QA pairs">​</a></h3>
<p>If your knowledge is in the form of QA pairs, you can select the &quot;QA Input&quot; tab.</p>
<p>Copy and paste your QA pairs into the text area. The content must be formatted like this:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Q: This is a Q</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">A: This is an A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Q: This is a second Q</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">A: This is a second A</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="Add QA to the knowledge base" src="/docs/assets/images/agentic-search-add-qa-d42f6d3aa12b5338cf1da29a2facadb2.png" width="2520" height="1734" class="img_ev3q"></p>
<p>Click on &quot;Process and Create Embeddings&quot; at the bottom of the page.</p>
<p><img decoding="async" loading="lazy" alt="Job progress" src="/docs/assets/images/agentic-search-process-5d1fdf337b45d784b01391e9b3ca0af4.png" width="2752" height="1190" class="img_ev3q"></p>
<p>You will see that both the Qdrant vector collection and TiDB table are populated.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="start-the-mcp-server">Start the MCP server<a href="#start-the-mcp-server" class="hash-link" aria-label="Direct link to Start the MCP server" title="Direct link to Start the MCP server">​</a></h2>
<p>Install the agentic search MCP server for Linux on x86.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -LO https://github.com/cardea-mcp/cardea-mcp-servers/releases/download/0.8.0/cardea-mcp-servers-unknown-linux-gnu-x86_64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gunzip cardea-mcp-servers-unknown-linux-gnu-x86_64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar xvf cardea-mcp-servers-unknown-linux-gnu-x86_64.tar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>Download for your platform: <a href="https://github.com/cardea-mcp/cardea-mcp-servers/releases/tag/0.8.0/" target="_blank" rel="noopener noreferrer">https://github.com/cardea-mcp/cardea-mcp-servers/releases/tag/0.8.0/</a></p>
</blockquote>
<p>Set the environment variables. The <code>TIDB_CONNECTION</code> is the TiDB connection URL from above, which includes the username and password. The <code>QDRANT_BASE_URL</code> is the Qdrant cluster connection URL, and it defaults to <code>http://localhost:6333</code>.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export RUST_LOG=debug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export LLAMA_LOG=debug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export TIDB_CONNECTION=mysql://42eZLKLSueg7p8K.root:&lt;PASSWORD&gt;@gateway01.ap-southeast-1.prod.aws.tidbcloud.com:4000/test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export QDRANT_BASE_URL=https://bb8ab5cf-eae2-4c7c-9493-5f7a183c89b8.us-east4-0.gcp.cloud.qdrant.io:6333</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export QDRANT_API_KEY=xxxxxxxx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Start the agentic search MCP server with database connection parameters. Make sure that you adjust the <code>--search-tool-prompt</code> to describe the search queries that can be performed for this database.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nohup ./cardea-agentic-search-mcp-server \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --socket-addr 127.0.0.1:9096 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --transport stream-http \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    search \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --qdrant-collection myPoints \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --qdrant-payload-field &quot;full_text&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --tidb-ssl-ca /etc/ssl/certs/ca-certificates.crt \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --tidb-table-name myItems \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --chat-service https://0xb2962131564bc854ece7b0f7c8c9a8345847abfb.gaia.domains/v1 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --embedding-service https://0x448f0405310a9258cd5eab5f25f15679808c5db2.gaia.domains/v1 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --limit 5 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --score-threshold 0.5 &amp;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The MCP server is started on port <code>9096</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-an-inference-server">Create an inference server<a href="#create-an-inference-server" class="hash-link" aria-label="Direct link to Create an inference server" title="Direct link to Create an inference server">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-llama-nexus">Install llama-nexus<a href="#install-llama-nexus" class="hash-link" aria-label="Direct link to Install llama-nexus" title="Direct link to Install llama-nexus">​</a></h3>
<p>The following command installs the Linux on x86 version of llama-nexus.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -LO https://github.com/LlamaEdge/llama-nexus/releases/download/0.6.0/llama-nexus-unknown-linux-gnu-x86_64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gunzip llama-nexus-unknown-linux-gnu-x86_64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar xvf llama-nexus-unknown-linux-gnu-x86_64.tar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>Download for your platfrom here: <a href="https://github.com/LlamaEdge/llama-nexus/releases/tag/0.6.0/" target="_blank" rel="noopener noreferrer">https://github.com/LlamaEdge/llama-nexus/releases/tag/0.6.0/</a></p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-llama-nexus">Configure llama-nexus<a href="#configure-llama-nexus" class="hash-link" aria-label="Direct link to Configure llama-nexus" title="Direct link to Configure llama-nexus">​</a></h3>
<p>Edit the <code>config.toml</code> file to specify a port (<code>9095</code>) for the gateway seerver to listen to.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[server]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">host = &quot;0.0.0.0&quot; # The host to listen on.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">port = 9095        # The port to listen on.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Enable the previously started TiDB search MCP server on port <code>9096</code>.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[[mcp.server.tool]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      = &quot;cardea-agentic-search&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">transport = &quot;stream-http&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">url       = &quot;http://127.0.0.1:9096/mcp&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enable    = true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-llama-nexus">Start llama-nexus<a href="#start-llama-nexus" class="hash-link" aria-label="Direct link to Start llama-nexus" title="Direct link to Start llama-nexus">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nohup ./llama-nexus --config config.toml &amp;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="register-downstream-api-servers">Register downstream API servers<a href="#register-downstream-api-servers" class="hash-link" aria-label="Direct link to Register downstream API servers" title="Direct link to Register downstream API servers">​</a></h3>
<p>Register an LLM chat API server for the <code>/chat/completions</code> endpoint.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl --location &#x27;http://localhost:9095/admin/servers/register&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--header &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--data &#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;url&quot;: &quot;https://0xb2962131564bc854ece7b0f7c8c9a8345847abfb.gaia.domains/v1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;kind&quot;: &quot;chat&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Register an embedding API server for the <code>/embeddings</code> endpoint.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl --location &#x27;http://localhost:9095/admin/servers/register&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--header &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--data &#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;url&quot;: &quot;https://0x448f0405310a9258cd5eab5f25f15679808c5db2.gaia.domains/v1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;kind&quot;: &quot;embeddings&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>You can add an <code>api-key</code> field in the <code>data</code> structure for API servers that require API key access.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-the-inference-server">Test the inference server<a href="#test-the-inference-server" class="hash-link" aria-label="Direct link to Test the inference server" title="Direct link to Test the inference server">​</a></h2>
<p>Use the command line to request the <code>/chat/completions</code> API endpoint directly.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST http://localhost:9095/v1/chat/completions \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H &#x27;accept: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d &#x27;{&quot;messages&quot;:[{&quot;role&quot;:&quot;system&quot;, &quot;content&quot;: &quot;If the user asks a question, you MUST use the search() tool call and pass in a list of search keywords to search for relevant information and then form your response based on the search results.&quot;},{&quot;role&quot;:&quot;user&quot;, &quot;content&quot;: &quot;What prevents cancer?&quot;}]}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/llama-nexus/mcp/agentic-search.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/llama-nexus/mcp/quick-start-with-mcp"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Quick start with MCP servers</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/llama-nexus/mcp/add-mcp-server"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Connect Another MCP Server</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prepare-databases" class="table-of-contents__link toc-highlight">Prepare databases</a><ul><li><a href="#qdrant-cloud" class="table-of-contents__link toc-highlight">Qdrant cloud</a></li><li><a href="#tidb-cloud" class="table-of-contents__link toc-highlight">TiDB cloud</a></li></ul></li><li><a href="#set-up-knowledge-base" class="table-of-contents__link toc-highlight">Set up knowledge base</a><ul><li><a href="#qdrant" class="table-of-contents__link toc-highlight">Qdrant</a></li><li><a href="#tidb" class="table-of-contents__link toc-highlight">TiDB</a></li><li><a href="#embedding-service" class="table-of-contents__link toc-highlight">Embedding Service</a></li><li><a href="#llm-service" class="table-of-contents__link toc-highlight">LLM Service</a></li></ul></li><li><a href="#add-knowledge" class="table-of-contents__link toc-highlight">Add knowledge</a><ul><li><a href="#add-a-set-of-qa-pairs" class="table-of-contents__link toc-highlight">Add a set of QA pairs</a></li></ul></li><li><a href="#start-the-mcp-server" class="table-of-contents__link toc-highlight">Start the MCP server</a></li><li><a href="#create-an-inference-server" class="table-of-contents__link toc-highlight">Create an inference server</a><ul><li><a href="#install-llama-nexus" class="table-of-contents__link toc-highlight">Install llama-nexus</a></li><li><a href="#configure-llama-nexus" class="table-of-contents__link toc-highlight">Configure llama-nexus</a></li><li><a href="#start-llama-nexus" class="table-of-contents__link toc-highlight">Start llama-nexus</a></li><li><a href="#register-downstream-api-servers" class="table-of-contents__link toc-highlight">Register downstream API servers</a></li></ul></li><li><a href="#test-the-inference-server" class="table-of-contents__link toc-highlight">Test the inference server</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/qCwvnwvtYU" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/realwasmedge" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/LlamaEdge/LlamaEdge/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 LlamaEdge. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>